<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.xkt.mapper.AdvertStoreFileMapper">

    <select id="selectFilePage" resultType="com.ruoyi.xkt.dto.advertStoreFile.AdvertStoreFileResDTO">
        SELECT
            ssf.id AS advertStoreFileId,
            s.store_name,
            ssf.type_id,
            sf.file_url
        FROM
            advert_store_file ssf
                LEFT JOIN sys_file sf ON ssf.pic_id = sf.id
                LEFT JOIN store s ON ssf.store_id = s.id
        WHERE
            ssf.del_flag = 0
            <if test="storeName != null and storeName != ''">
                AND s.store_name LIKE CONCAT('%', #{storeName}, '%')
            </if>
            <if test="typeId != null">
                AND ssf.type_id = #{typeId}
            </if>
        ORDER BY
            ssf.create_time DESC
    </select>

</mapper>