<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.xkt.mapper.UserAuthenticationMapper">

    <select id="selectUserAuthPage" resultType="com.ruoyi.xkt.dto.userAuthentication.UserAuthPageResDTO">
        SELECT
            ua.id AS userAuthId,
            ua.real_name,
            u.phonenumber,
            ua.id_card,
            ua.auth_status,
            ua.del_flag
        FROM
            user_authentication ua JOIN sys_user u ON ua.user_id = u.user_id
        <where>
            <if test="realName != null and realName != ''">
                AND ua.real_name LIKE concat('%', #{realName}, '%')
            </if>
            <if test="authStatus != null and authStatus != ''">
                AND ua.auth_status = #{authStatus}
            </if>
            <if test="delFlag != null and delFlag != ''">
                AND ua.del_flag = #{delFlag}
            </if>
        </where>
    </select>

    <select id="selectUserAuthAppPage" resultType="com.ruoyi.xkt.dto.userAuthentication.UserAuthAppPageResDTO">
        SELECT
            ua.id AS userAuthId,
            ua.real_name,
            u.phonenumber,
            u.avatar
        FROM
            user_authentication ua JOIN sys_user u ON ua.user_id = u.user_id
        WHERE
            ua.del_flag = 0 AND ua.auth_status = 3
            <if test="realName != null and realName != ''">
                AND ua.real_name LIKE concat('%', #{realName}, '%')
            </if>
    </select>

</mapper>